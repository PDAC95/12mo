{% extends "public/base_public.html" %}
{% load static %}

{% block title %}Sign In - Wallai{% endblock %}

{% block content %}
<div class="min-h-screen bg-white">
    <div class="flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full">
            <!-- Header -->
            <div class="text-center mb-8">
                <img src="https://res.cloudinary.com/dpkvlxhyn/image/upload/v1757531600/logo-vertical_nioobl.png" 
                     alt="Wallai" 
                     class="h-24 w-auto mx-auto mb-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">
                    Sign In
                </h2>
                <p class="text-gray-600">
                    Access your account to manage your finances
                </p>
            </div>

            <!-- Login Form -->
            <div>
                <form method="post" class="space-y-6" novalidate>
                    {% csrf_token %}
                    
                    <!-- Email Field -->
                    <div>
                        <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ form.email.label }}
                        </label>
                        <input type="{{ form.email.field.widget.input_type }}" 
                               name="{{ form.email.name }}" 
                               id="{{ form.email.id_for_label }}"
                               class="wallai-input"
                               placeholder="you@email.com"
                               {% if form.email.value %}value="{{ form.email.value }}"{% endif %}>
                        {% if form.email.errors %}
                            <div class="mt-2">
                                {% for error in form.email.errors %}
                                    <p class="text-sm text-red-600">{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Password Field -->
                    <div>
                        <label for="{{ form.password.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ form.password.label }}
                        </label>
                        <input type="password" 
                               name="{{ form.password.name }}" 
                               id="{{ form.password.id_for_label }}"
                               class="wallai-input"
                               placeholder="••••••••">
                        {% if form.password.errors %}
                            <div class="mt-2">
                                {% for error in form.password.errors %}
                                    <p class="text-sm text-red-600">{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Remember Me & Forgot Password -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input type="checkbox" 
                                   name="{{ form.remember_me.name }}" 
                                   id="{{ form.remember_me.id_for_label }}"
                                   class="w-4 h-4 text-wallai-green bg-gray-100 border-gray-300 rounded focus:ring-wallai-green">
                            <label for="{{ form.remember_me.id_for_label }}" class="ml-2 block text-sm text-gray-700">
                                {{ form.remember_me.label }}
                            </label>
                        </div>
                        <div>
                            <a href="#" class="text-sm text-wallai-green hover:text-wallai-blue transition-colors">
                                Forgot your password?
                            </a>
                        </div>
                    </div>

                    <!-- Form Errors -->
                    {% if form.non_field_errors %}
                        <div class="bg-red-50 border border-red-200 rounded-xl p-4">
                            {% for error in form.non_field_errors %}
                                <p class="text-sm text-red-700">{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}

                    <!-- Submit Button -->
                    <div>
                        <button type="submit" class="wallai-btn w-full py-3 text-base font-medium">
                            Sign In
                        </button>
                    </div>
                </form>
            </div>

            <!-- Register Link -->
            <div class="text-center mt-6">
                <p class="text-gray-600">
                    Don't have an account?
                    <a href="{% url 'authentication:register' %}" class="text-wallai-green hover:text-wallai-blue font-medium transition-colors">
                        Sign up here
                    </a>
                </p>
            </div>

            <!-- Back to Home -->
            <div class="text-center mt-4">
                <a href="{% url 'public:home' %}" class="text-gray-500 hover:text-gray-700 text-sm transition-colors">
                    ← Back to home
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-focus first input field
    const firstInput = document.querySelector('input[type="email"], input[type="text"]');
    if (firstInput) {
        firstInput.focus();
    }
    
    // Show/hide password functionality (future enhancement)
    const passwordField = document.querySelector('input[type="password"]');
    if (passwordField) {
        // Add show/hide password toggle (future)
    }
});
</script>
{% endblock %}